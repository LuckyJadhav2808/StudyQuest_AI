<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyQuest - Student Productivity Platform</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        heading: ['Outfit', 'sans-serif'],
                    },
                    colors: {
                        gray: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                            950: '#020617',
                        },
                        dark: {
                            bg: '#0f172a',
                            surface: '#1e293b',
                            border: '#334155'
                        }
                    }
                }
            }
        }
    </script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@500;600;700&display=swap"
        rel="stylesheet">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="style.css">

    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Quill.js for Rich Text Editing -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

    <!-- html2pdf for PDF Export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <!-- Markdown Support for Chat -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.6/purify.min.js"></script>

    <!-- Chart.js for Analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
    <!-- Notification Container -->
    <div id="notification-container" class="fixed top-4 right-4 z-[100] flex flex-col gap-2 pointer-events-none"></div>

    <!-- Authentication Pages Container -->
    <div id="auth-container" class="min-h-screen flex items-center justify-center p-4">

        <!-- Login Page -->
        <div id="login-page" class="auth-page w-full max-w-md">
            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 transform transition-all">
                <div class="text-center mb-8">
                    <div
                        class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full mb-4">
                        <i class="fas fa-graduation-cap text-white text-2xl"></i>
                    </div>
                    <h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-2">StudyQuest</h1>
                    <p class="text-gray-600 dark:text-gray-400">Your All-in-One Study Companion</p>
                </div>

                <form id="login-form" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Email</label>
                        <input type="email" id="login-email" required
                            class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Password</label>
                        <input type="password" id="login-password" required
                            class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                    </div>

                    <button type="submit"
                        class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transform hover:scale-105 transition duration-200">
                        <i class="fas fa-sign-in-alt mr-2"></i>Login with Password
                    </button>
                </form>

                <div class="mt-4">
                    <div class="relative">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-300 dark:border-gray-600"></div>
                        </div>
                        <div class="relative flex justify-center text-sm">
                            <span class="px-2 bg-white dark:bg-gray-800 text-gray-500">Or</span>
                        </div>
                    </div>

                    <button id="google-login-btn" type="button"
                        class="mt-4 w-full bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 py-3 rounded-lg font-semibold hover:bg-gray-50 dark:hover:bg-gray-600 transition duration-200 flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" viewBox="0 0 24 24">
                            <path fill="#4285F4"
                                d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                            <path fill="#34A853"
                                d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                            <path fill="#FBBC05"
                                d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                            <path fill="#EA4335"
                                d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                        </svg>
                        Continue with Google
                    </button>
                </div>

                <div class="mt-6 text-center">
                    <p class="text-gray-600 dark:text-gray-400">
                        Don't have an account?
                        <button id="show-register"
                            class="text-blue-500 hover:text-blue-600 font-semibold">Register</button>
                    </p>
                </div>

                <div id="auth-error"
                    class="mt-4 p-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 rounded-lg hidden"></div>
            </div>
        </div>

        <!-- Register Page -->
        <div id="register-page" class="auth-page w-full max-w-md hidden">
            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 transform transition-all">
                <div class="text-center mb-8">
                    <div
                        class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-green-500 to-teal-600 rounded-full mb-4">
                        <i class="fas fa-user-plus text-white text-2xl"></i>
                    </div>
                    <h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-2">Create Account</h1>
                    <p class="text-gray-600 dark:text-gray-400">Join StudyQuest Today</p>
                </div>

                <form id="register-form" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Email</label>
                        <input type="email" id="register-email" required
                            class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Password</label>
                        <input type="password" id="register-password" required minlength="6"
                            class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Confirm
                            Password</label>
                        <input type="password" id="register-confirm-password" required minlength="6"
                            class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition">
                    </div>

                    <button type="submit"
                        class="w-full bg-gradient-to-r from-green-500 to-teal-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transform hover:scale-105 transition duration-200">
                        <i class="fas fa-user-plus mr-2"></i>Create Account
                    </button>
                </form>

                <div class="mt-6 text-center">
                    <p class="text-gray-600 dark:text-gray-400">
                        Already have an account?
                        <button id="show-login" class="text-green-500 hover:text-green-600 font-semibold">Login</button>
                    </p>
                </div>

                <div id="register-error"
                    class="mt-4 p-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 rounded-lg hidden"></div>
            </div>
        </div>
    </div>

    <!-- Main Dashboard Container -->
    <div id="dashboard-container" class="hidden min-h-screen">

        <!-- Sidebar Navigation -->
        <aside id="sidebar"
            class="fixed left-0 top-0 h-full w-64 bg-white dark:bg-gray-800 shadow-lg transform transition-transform duration-300 z-50">
            <div class="flex flex-col h-full">

                <!-- Logo Section -->
                <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                    <div class="flex items-center space-x-3">
                        <div
                            class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center">
                            <i class="fas fa-graduation-cap text-white"></i>
                        </div>
                        <div>
                            <h2 class="text-xl font-bold text-gray-800 dark:text-white">StudyQuest</h2>
                            <p class="text-xs text-gray-500 dark:text-gray-400">Productivity Hub</p>
                        </div>
                    </div>
                </div>

                <!-- Navigation Menu -->
                <nav class="flex-1 overflow-y-auto p-4">
                    <ul class="space-y-2">
                        <li>
                            <button
                                class="nav-item active w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition"
                                data-tool="dashboard">
                                <i class="fas fa-home w-5"></i>
                                <span>Dashboard</span>
                            </button>
                        </li>
                        <li>
                            <button class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition"
                                data-tool="tasks">
                                <i class="fas fa-tasks w-5"></i>
                                <span>Task Manager</span>
                            </button>
                        </li>
                        <li>
                            <button class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition"
                                data-tool="events">
                                <i class="fas fa-calendar-alt w-5"></i>
                                <span>Event Manager</span>
                            </button>
                        </li>
                        <li>
                            <button class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition"
                                data-tool="timetable">
                                <i class="fas fa-clock w-5"></i>
                                <span>Timetable</span>
                            </button>
                        </li>
                        <li>
                            <button class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition"
                                data-tool="notes">
                                <i class="fas fa-sticky-note w-5"></i>
                                <span>Notes</span>
                            </button>
                        </li>
                        <li>
                            <button class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition"
                                data-tool="resources">
                                <i class="fas fa-folder w-5"></i>
                                <span>Resources</span>
                            </button>
                        </li>
                        <li>
                            <button class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition"
                                data-tool="chatbot">
                                <i class="fas fa-robot w-5"></i>
                                <span>AI Assistant</span>
                            </button>
                        </li>
                        <li>
                            <button class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition"
                                data-tool="analytics">
                                <i class="fas fa-chart-line w-5"></i>
                                <span>Analytics</span>
                            </button>
                        </li>
                        <li>
                            <button class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition"
                                data-tool="gamification">
                                <i class="fas fa-trophy w-5"></i>
                                <span>Achievements</span>
                            </button>
                        </li>
                        <li>
                            <button class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition"
                                data-tool="backup">
                                <i class="fas fa-database w-5"></i>
                                <span>Backup</span>
                            </button>
                        </li>
                    </ul>
                </nav>

                <!-- User Profile Section -->
                <div class="p-4 border-t border-gray-200 dark:border-gray-700">
                    <button id="profile-btn" data-tool="profile"
                        class="nav-item w-full flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition">
                        <div id="sidebar-avatar"
                            class="w-10 h-10 bg-gradient-to-r from-pink-500 to-orange-500 rounded-full flex items-center justify-center text-xl shadow-sm overflow-hidden">
                            <i class="fas fa-user text-white"></i>
                        </div>
                        <div class="flex-1 text-left overflow-hidden">
                            <p class="text-sm font-semibold text-gray-800 dark:text-white truncate"
                                id="user-display-name">User</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400">View Profile</p>
                        </div>
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="ml-64 min-h-screen">

            <!-- Top Header -->
            <header class="bg-white dark:bg-gray-800 shadow-sm sticky top-0 z-40">
                <div class="flex items-center justify-between px-6 py-4">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800 dark:text-white" id="page-title">Dashboard</h1>
                        <p class="text-sm text-gray-500 dark:text-gray-400" id="page-subtitle">Welcome back to
                            StudyQuest</p>
                    </div>

                    <div class="flex items-center space-x-4">
                        <!-- Dark Mode Toggle -->
                        <button id="theme-toggle"
                            class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition">
                            <i class="fas fa-moon text-gray-600 dark:text-gray-300"></i>
                        </button>

                        <!-- Notifications -->
                        <button id="notifications-btn"
                            class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition relative">
                            <i class="fas fa-bell text-gray-600 dark:text-gray-300"></i>
                            <span class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
                        </button>

                        <!-- Logout -->
                        <button id="logout-btn"
                            class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition">
                            <i class="fas fa-sign-out-alt mr-2"></i>Logout
                        </button>
                    </div>
                </div>
            </header>

            <!-- Content Sections -->
            <div class="p-6">

                <!-- Dashboard Home -->
                <div id="tool-dashboard" class="tool-section">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <!-- Stats Cards -->
                        <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white shadow-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-blue-100 text-sm">Total Tasks</p>
                                    <h3 id="dashboard-total-tasks" class="text-3xl font-bold mt-1">0</h3>
                                </div>
                                <div
                                    class="w-12 h-12 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-tasks text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white shadow-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-green-100 text-sm">Upcoming Events</p>
                                    <h3 id="dashboard-upcoming-events" class="text-3xl font-bold mt-1">0</h3>
                                </div>
                                <div
                                    class="w-12 h-12 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-calendar text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <div
                            class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white shadow-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-purple-100 text-sm">Study Streak</p>
                                    <h3 id="dashboard-streak" class="text-3xl font-bold mt-1">0 days</h3>
                                </div>
                                <div
                                    class="w-12 h-12 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-fire text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <div
                            class="bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white shadow-lg">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-orange-100 text-sm">Total Points</p>
                                    <h3 id="dashboard-total-xp" class="text-3xl font-bold mt-1">0</h3>
                                </div>
                                <div
                                    class="w-12 h-12 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-star text-2xl"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-4">Quick Actions</h2>
                        <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
                            <button class="quick-action-btn" data-tool="tasks">
                                <i class="fas fa-plus-circle text-2xl mb-2"></i>
                                <span>Add Task</span>
                            </button>
                            <button class="quick-action-btn" data-tool="events">
                                <i class="fas fa-calendar-plus text-2xl mb-2"></i>
                                <span>New Event</span>
                            </button>
                            <button class="quick-action-btn" data-tool="notes">
                                <i class="fas fa-edit text-2xl mb-2"></i>
                                <span>Take Notes</span>
                            </button>
                            <button class="quick-action-btn" data-tool="chatbot">
                                <i class="fas fa-comments text-2xl mb-2"></i>
                                <span>Ask AI</span>
                            </button>
                            <button class="quick-action-btn" data-tool="analytics">
                                <i class="fas fa-chart-bar text-2xl mb-2"></i>
                                <span>View Stats</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Other Tool Sections (Placeholders for now) -->
                <div id="tool-tasks" class="tool-section hidden">
                    <!-- Task Manager Header -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg mb-6">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-2">Task Manager</h2>
                                <p class="text-gray-600 dark:text-gray-400">Organize and track your tasks efficiently
                                </p>
                            </div>
                            <button id="add-task-btn"
                                class="px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-semibold hover:shadow-lg transform hover:scale-105 transition">
                                <i class="fas fa-plus mr-2"></i>Add New Task
                            </button>
                        </div>

                        <!-- Filters and Search -->
                        <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Search
                                    Tasks</label>
                                <input type="text" id="task-search" placeholder="Search by title or description..."
                                    class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Filter by
                                    Priority</label>
                                <select id="task-priority-filter"
                                    class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition">
                                    <option value="all">All Priorities</option>
                                    <option value="high">High Priority</option>
                                    <option value="medium">Medium Priority</option>
                                    <option value="low">Low Priority</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Filter by
                                    Status</label>
                                <select id="task-status-filter"
                                    class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition">
                                    <option value="all">All Tasks</option>
                                    <option value="pending">Pending</option>
                                    <option value="completed">Completed</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Task Statistics -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-blue-500 rounded-xl p-4 text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-blue-100 text-sm">Total Tasks</p>
                                    <h3 class="text-2xl font-bold mt-1" id="total-tasks-count">0</h3>
                                </div>
                                <i class="fas fa-tasks text-3xl opacity-50"></i>
                            </div>
                        </div>
                        <div class="bg-green-500 rounded-xl p-4 text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-green-100 text-sm">Completed</p>
                                    <h3 class="text-2xl font-bold mt-1" id="completed-tasks-count">0</h3>
                                </div>
                                <i class="fas fa-check-circle text-3xl opacity-50"></i>
                            </div>
                        </div>
                        <div class="bg-yellow-500 rounded-xl p-4 text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-yellow-100 text-sm">Pending</p>
                                    <h3 class="text-2xl font-bold mt-1" id="pending-tasks-count">0</h3>
                                </div>
                                <i class="fas fa-clock text-3xl opacity-50"></i>
                            </div>
                        </div>
                        <div class="bg-red-500 rounded-xl p-4 text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-red-100 text-sm">High Priority</p>
                                    <h3 class="text-2xl font-bold mt-1" id="high-priority-count">0</h3>
                                </div>
                                <i class="fas fa-exclamation-circle text-3xl opacity-50"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Tasks List -->
                    <div id="tasks-container" class="space-y-4">
                        <!-- Tasks will be dynamically inserted here -->
                    </div>

                    <!-- Empty State -->
                    <div id="tasks-empty-state" class="hidden bg-white dark:bg-gray-800 rounded-xl p-12 text-center">
                        <i class="fas fa-tasks text-6xl text-gray-300 dark:text-gray-600 mb-4"></i>
                        <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">No Tasks Found</h3>
                        <p class="text-gray-600 dark:text-gray-400 mb-6">Get started by creating your first task!</p>
                        <button onclick="document.getElementById('add-task-btn').click()"
                            class="px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-semibold hover:shadow-lg transition">
                            <i class="fas fa-plus mr-2"></i>Create Task
                        </button>
                    </div>
                </div>

                <!-- Task Modal -->
                <div id="task-modal"
                    class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                    <div
                        class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-2xl font-bold text-gray-800 dark:text-white" id="task-modal-title">Add New
                                Task</h2>
                            <button id="close-task-modal"
                                class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                                <i class="fas fa-times text-2xl"></i>
                            </button>
                        </div>

                        <form id="task-form" class="space-y-4">
                            <input type="hidden" id="task-id">

                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Task
                                    Title *</label>
                                <input type="text" id="task-title" required
                                    class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition"
                                    placeholder="Enter task title...">
                            </div>

                            <div>
                                <label
                                    class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Description</label>
                                <textarea id="task-description" rows="3"
                                    class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition"
                                    placeholder="Enter task description..."></textarea>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label
                                        class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Priority
                                        *</label>
                                    <select id="task-priority" required
                                        class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition">
                                        <option value="low">Low Priority</option>
                                        <option value="medium" selected>Medium Priority</option>
                                        <option value="high">High Priority</option>
                                    </select>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Due
                                        Date</label>
                                    <input type="date" id="task-due-date"
                                        class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 transition">
                                </div>
                            </div>

                            <div class="flex gap-3 mt-6">
                                <button type="submit"
                                    class="flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-semibold hover:shadow-lg transition">
                                    <i class="fas fa-save mr-2"></i><span id="task-submit-text">Add Task</span>
                                </button>
                                <button type="button" id="cancel-task-btn"
                                    class="px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition">
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <div id="tool-events" class="tool-section hidden">
                    <!-- Event Manager Header -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg mb-6">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-2">Event Manager</h2>
                                <p class="text-gray-600 dark:text-gray-400">Plan and track your events with calendar
                                    view
                                </p>
                            </div>
                            <button id="add-event-btn"
                                class="px-6 py-3 bg-gradient-to-r from-green-500 to-teal-600 text-white rounded-lg font-semibold hover:shadow-lg transform hover:scale-105 transition">
                                <i class="fas fa-plus mr-2"></i>Add New Event
                            </button>
                        </div>
                    </div>

                    <!-- Event Statistics -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-white dark:bg-gray-800 rounded-xl p-4 shadow-lg">
                            <p class="text-gray-600 dark:text-gray-400 text-sm">Total Events</p>
                            <h3 id="total-events-count" class="text-3xl font-bold text-gray-800 dark:text-white">0</h3>
                        </div>
                        <div class="bg-white dark:bg-gray-800 rounded-xl p-4 shadow-lg">
                            <p class="text-gray-600 dark:text-gray-400 text-sm">Today</p>
                            <h3 id="today-events-count" class="text-3xl font-bold text-green-600">0</h3>
                        </div>
                        <div class="bg-white dark:bg-gray-800 rounded-xl p-4 shadow-lg">
                            <p class="text-gray-600 dark:text-gray-400 text-sm">Upcoming (7 days)</p>
                            <h3 id="upcoming-events-count" class="text-3xl font-bold text-blue-600">0</h3>
                        </div>
                        <div class="bg-white dark:bg-gray-800 rounded-xl p-4 shadow-lg">
                            <p class="text-gray-600 dark:text-gray-400 text-sm">Past Events</p>
                            <h3 id="past-events-count" class="text-3xl font-bold text-gray-600">0</h3>
                        </div>
                    </div>

                    <!-- Calendar and Event List -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Calendar View -->
                        <div class="lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                            <!-- Calendar Header -->
                            <div class="flex items-center justify-between mb-6">
                                <h3 id="calendar-month-year" class="text-xl font-bold text-gray-800 dark:text-white">
                                    January 2026</h3>
                                <div class="flex gap-2">
                                    <button id="prev-month-btn"
                                        class="px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button id="today-btn"
                                        class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition">
                                        Today
                                    </button>
                                    <button id="next-month-btn"
                                        class="px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Calendar Grid -->
                            <div class="calendar-grid">
                                <!-- Day Headers -->
                                <div class="grid grid-cols-7 gap-2 mb-2">
                                    <div
                                        class="text-center text-sm font-semibold text-gray-600 dark:text-gray-400 py-2">
                                        Sun
                                    </div>
                                    <div
                                        class="text-center text-sm font-semibold text-gray-600 dark:text-gray-400 py-2">
                                        Mon
                                    </div>
                                    <div
                                        class="text-center text-sm font-semibold text-gray-600 dark:text-gray-400 py-2">
                                        Tue
                                    </div>
                                    <div
                                        class="text-center text-sm font-semibold text-gray-600 dark:text-gray-400 py-2">
                                        Wed
                                    </div>
                                    <div
                                        class="text-center text-sm font-semibold text-gray-600 dark:text-gray-400 py-2">
                                        Thu
                                    </div>
                                    <div
                                        class="text-center text-sm font-semibold text-gray-600 dark:text-gray-400 py-2">
                                        Fri
                                    </div>
                                    <div
                                        class="text-center text-sm font-semibold text-gray-600 dark:text-gray-400 py-2">
                                        Sat
                                    </div>
                                </div>

                                <!-- Calendar Dates (will be populated by JavaScript) -->
                                <div id="calendar-dates" class="grid grid-cols-7 gap-2">
                                    <!-- Dates will be dynamically generated -->
                                </div>
                            </div>
                        </div>

                        <!-- Event List for Selected Date -->
                        <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                            <h3 id="selected-date-title" class="text-lg font-bold text-gray-800 dark:text-white mb-4">
                                Events for Today</h3>

                            <!-- Event List Container -->
                            <div id="events-list-container" class="space-y-3 max-h-96 overflow-y-auto">
                                <!-- Events will be dynamically populated -->
                            </div>

                            <!-- Empty State -->
                            <div id="events-empty-state" class="text-center py-8 hidden">
                                <i class="fas fa-calendar-times text-5xl text-gray-400 mb-4"></i>
                                <p class="text-gray-500 dark:text-gray-400">No events for this date</p>
                                <button id="add-event-from-empty"
                                    class="mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition">
                                    <i class="fas fa-plus mr-2"></i>Add Event
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Event Modal -->
                <div id="event-modal"
                    class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4">
                        <div class="flex items-center justify-between mb-6">
                            <h2 id="event-modal-title" class="text-2xl font-bold text-gray-800 dark:text-white">Add New
                                Event</h2>
                            <button id="close-event-modal"
                                class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                                <i class="fas fa-times text-2xl"></i>
                            </button>
                        </div>

                        <form id="event-form" class="space-y-4">
                            <input type="hidden" id="event-id">

                            <!-- Event Title -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Event
                                    Title *</label>
                                <input type="text" id="event-title" required
                                    class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition"
                                    placeholder="Enter event title">
                            </div>

                            <!-- Event Description -->
                            <div>
                                <label
                                    class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Description</label>
                                <textarea id="event-description" rows="3"
                                    class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition"
                                    placeholder="Enter event description (optional)"></textarea>
                            </div>

                            <!-- Event Date -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Date
                                    *</label>
                                <input type="date" id="event-date" required
                                    class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition">
                            </div>

                            <!-- Time Row -->
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Start
                                        Time *</label>
                                    <input type="time" id="event-start-time" required
                                        class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">End
                                        Time</label>
                                    <input type="time" id="event-end-time"
                                        class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition">
                                </div>
                            </div>

                            <!-- Event Color -->
                            <div>
                                <label
                                    class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Color</label>
                                <div class="flex gap-2">
                                    <input type="color" id="event-color" value="#3b82f6"
                                        class="w-16 h-12 rounded-lg border border-gray-300 dark:border-gray-600 cursor-pointer">
                                    <input type="text" id="event-color-text" value="#3b82f6" readonly
                                        class="flex-1 px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white">
                                </div>
                            </div>

                            <!-- Form Actions -->
                            <div class="flex gap-3 pt-4">
                                <button type="submit"
                                    class="flex-1 bg-gradient-to-r from-green-500 to-teal-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transform hover:scale-105 transition">
                                    <i class="fas fa-save mr-2"></i><span id="event-submit-text">Add Event</span>
                                </button>
                                <button type="button" id="cancel-event-btn"
                                    class="flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-3 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition">
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <div id="tool-timetable" class="tool-section hidden">
                    <!-- Timetable Header -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg mb-6">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-2">Weekly Timetable</h2>
                                <p class="text-gray-600 dark:text-gray-400">Manage your class schedule and activities
                                </p>
                            </div>
                            <div class="flex gap-2">
                                <button id="add-class-btn"
                                    class="px-6 py-3 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-lg font-semibold hover:shadow-lg transform hover:scale-105 transition">
                                    <i class="fas fa-plus mr-2"></i>Add Class
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Timetable Grid Container -->
                    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg item-content">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-xl font-bold text-gray-800 dark:text-white">Current Schedule</h3>
                                <div class="flex gap-2 text-sm">
                                    <span class="flex items-center gap-1">
                                        <div class="w-3 h-3 rounded-full bg-blue-500"></div> Lecture
                                    </span>
                                    <span class="flex items-center gap-1">
                                        <div class="w-3 h-3 rounded-full bg-green-500"></div> Lab
                                    </span>
                                    <span class="flex items-center gap-1">
                                        <div class="w-3 h-3 rounded-full bg-purple-500"></div> Tutorial
                                    </span>
                                </div>
                            </div>

                            <div class="overflow-x-auto pb-4 custom-scrollbar">
                                <div class="min-w-[800px] timetable-grid" id="timetable-grid">
                                    <!-- Header Row (Days) -->
                                    <div class="grid grid-cols-8 gap-1 mb-2">
                                        <div class="text-center py-2 font-bold text-gray-500 dark:text-gray-400">Time
                                        </div>
                                        <div
                                            class="text-center py-2 font-bold text-gray-800 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg">
                                            Mon</div>
                                        <div
                                            class="text-center py-2 font-bold text-gray-800 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg">
                                            Tue</div>
                                        <div
                                            class="text-center py-2 font-bold text-gray-800 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg">
                                            Wed</div>
                                        <div
                                            class="text-center py-2 font-bold text-gray-800 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg">
                                            Thu</div>
                                        <div
                                            class="text-center py-2 font-bold text-gray-800 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg">
                                            Fri</div>
                                        <div
                                            class="text-center py-2 font-bold text-gray-800 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg">
                                            Sat</div>
                                        <div
                                            class="text-center py-2 font-bold text-gray-800 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg">
                                            Sun</div>
                                    </div>

                                    <!-- Timetable Content (Dynamic) -->
                                    <div id="timetable-content"
                                        class="relative bg-gray-50 dark:bg-gray-900 rounded-lg min-h-[600px] border border-gray-200 dark:border-gray-700">
                                        <!-- Time slots and classes will be generated here -->
                                        <div class="absolute inset-0 flex items-center justify-center text-gray-400">
                                            <div class="text-center">
                                                <i class="fas fa-spinner fa-spin text-3xl mb-2"></i>
                                                <p>Loading schedule...</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Class/Activity Modal -->
                <div id="class-modal"
                    class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4">
                        <div class="flex items-center justify-between mb-6">
                            <h2 id="class-modal-title" class="text-2xl font-bold text-gray-800 dark:text-white">Add
                                Class</h2>
                            <button id="close-class-modal"
                                class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                                <i class="fas fa-times text-2xl"></i>
                            </button>
                        </div>

                        <form id="class-form" class="space-y-4">
                            <input type="hidden" id="class-id">

                            <!-- Subject Name -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Subject
                                    Name *</label>
                                <input type="text" id="class-subject" required
                                    class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition"
                                    placeholder="e.g. Mathematics">
                            </div>

                            <!-- Day and Room -->
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Day
                                        *</label>
                                    <select id="class-day" required
                                        class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition">
                                        <option value="Monday">Monday</option>
                                        <option value="Tuesday">Tuesday</option>
                                        <option value="Wednesday">Wednesday</option>
                                        <option value="Thursday">Thursday</option>
                                        <option value="Friday">Friday</option>
                                        <option value="Saturday">Saturday</option>
                                        <option value="Sunday">Sunday</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Room
                                        (Opt)</label>
                                    <input type="text" id="class-location"
                                        class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition"
                                        placeholder="e.g. 101">
                                </div>
                            </div>

                            <!-- Time -->
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Start
                                        Time *</label>
                                    <input type="time" id="class-start-time" required
                                        class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">End
                                        Time *</label>
                                    <input type="time" id="class-end-time" required
                                        class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition">
                                </div>
                            </div>

                            <!-- Professor & Color -->
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label
                                        class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Professor</label>
                                    <input type="text" id="class-professor"
                                        class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent transition"
                                        placeholder="e.g. Dr. Smith">
                                </div>
                                <div>
                                    <label
                                        class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Color</label>
                                    <div class="flex gap-2">
                                        <input type="color" id="class-color" value="#8b5cf6"
                                            class="w-full h-12 rounded-lg border border-gray-300 dark:border-gray-600 cursor-pointer">
                                    </div>
                                </div>
                            </div>

                            <!-- Form Actions -->
                            <div class="flex gap-3 pt-4">
                                <button type="submit"
                                    class="flex-1 bg-gradient-to-r from-purple-500 to-indigo-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transform hover:scale-105 transition">
                                    <i class="fas fa-save mr-2"></i><span id="class-submit-text">Add Class</span>
                                </button>
                                <button type="button" id="cancel-class-btn"
                                    class="flex-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 py-3 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition">
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <div id="tool-notes" class="tool-section hidden h-full">
                    <div class="flex flex-col md:flex-row gap-6 h-[calc(100vh-140px)]">
                        <!-- Sidebar: Notes List -->
                        <div
                            class="w-full md:w-1/4 bg-white dark:bg-gray-800 rounded-xl shadow-lg flex flex-col overflow-hidden">
                            <div class="p-4 border-b border-gray-100 dark:border-gray-700">
                                <button id="new-note-btn"
                                    class="w-full py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg font-semibold hover:shadow-lg transition">
                                    <i class="fas fa-plus mr-2"></i>New Note
                                </button>
                                <div class="mt-3 relative">
                                    <input type="text" id="note-search" placeholder="Search notes..."
                                        class="w-full px-4 py-2 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm">
                                    <i class="fas fa-search absolute right-3 top-3 text-gray-400 text-sm"></i>
                                </div>
                            </div>
                            <div id="notes-list" class="flex-1 overflow-y-auto custom-scrollbar p-2 space-y-2">
                                <!-- Notes will be inserted here -->
                                <div class="text-center text-gray-400 mt-10">
                                    <i class="fas fa-sticky-note text-4xl mb-3 opacity-50"></i>
                                    <p class="text-sm">No notes yet</p>
                                </div>
                            </div>
                        </div>

                        <!-- Main: Editor Area -->
                        <div
                            class="w-full md:w-3/4 bg-white dark:bg-gray-800 rounded-xl shadow-lg flex flex-col overflow-hidden relative">
                            <!-- Editor Header -->
                            <div
                                class="p-4 border-b border-gray-100 dark:border-gray-700 flex flex-col sm:flex-row justify-between items-center gap-4">
                                <input type="text" id="note-title" placeholder="Untitled Note"
                                    class="text-xl font-bold bg-transparent text-gray-800 dark:text-white focus:outline-none focus:border-b-2 focus:border-indigo-500 w-full sm:w-auto flex-1 pb-1 transition-colors">

                                <div class="flex items-center gap-2">
                                    <!-- Read/Edit Toggle -->
                                    <div class="bg-gray-100 dark:bg-gray-700 rounded-lg p-1 flex">
                                        <button id="mode-edit"
                                            class="px-3 py-1.5 rounded-md text-xs font-medium bg-white dark:bg-gray-600 text-indigo-600 dark:text-indigo-300 shadow-sm transition">
                                            Edit
                                        </button>
                                        <button id="mode-read"
                                            class="px-3 py-1.5 rounded-md text-xs font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition">
                                            Read
                                        </button>
                                    </div>

                                    <!-- PDF Export -->
                                    <div class="relative group">
                                        <button id="export-pdf-btn"
                                            class="px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition text-sm font-medium">
                                            <i class="fas fa-file-pdf mr-2 text-red-500"></i>Export
                                        </button>
                                        <!-- Dropdown -->
                                        <div
                                            class="absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-100 dark:border-gray-700 hidden group-hover:block z-50 p-1">
                                            <div
                                                class="px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                                Quality</div>
                                            <button onclick="NotesManager.exportPDF('low')"
                                                class="w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition">
                                                Low (Small Size)
                                            </button>
                                            <button onclick="NotesManager.exportPDF('medium')"
                                                class="w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition">
                                                Medium (Standard)
                                            </button>
                                            <button onclick="NotesManager.exportPDF('high')"
                                                class="w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition">
                                                High (Best Quality)
                                            </button>
                                        </div>
                                    </div>

                                    <button id="save-note-btn"
                                        class="px-4 py-2 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg hover:bg-indigo-200 dark:hover:bg-indigo-900/50 transition">
                                        <i class="fas fa-save"></i>
                                    </button>
                                    <button id="delete-note-btn"
                                        class="px-4 py-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Editor Container -->
                            <div class="flex-1 overflow-hidden relative bg-white dark:bg-transparent flex flex-col">
                                <div id="toolbar-container">
                                    <!-- Quill Toolbar will be injected here -->
                                </div>
                                <div id="editor-container" class="flex-1 overflow-y-auto">
                                    <div id="editor" class="h-full text-base text-gray-800 dark:text-gray-200">
                                        <!-- Editor Content -->
                                    </div>
                                </div>
                                <div id="read-view"
                                    class="hidden h-full overflow-y-auto p-6 md:p-8 prose dark:prose-invert max-w-none">
                                    <!-- Read-only content -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tool-resources" class="tool-section hidden h-full">
                    <div class="flex flex-col h-full bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                        <!-- Header -->
                        <div
                            class="p-6 border-b border-gray-100 dark:border-gray-700 flex flex-col md:flex-row justify-between items-center gap-4">
                            <div>
                                <h2 class="text-2xl font-bold font-heading text-gray-800 dark:text-white">Resource
                                    Library</h2>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Organize your links, videos, and
                                    documents</p>
                            </div>

                            <div class="flex gap-3 w-full md:w-auto">
                                <div class="relative flex-1 md:w-64">
                                    <input type="text" id="resource-search" placeholder="Search resources..."
                                        class="w-full pl-10 pr-4 py-2 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                                    <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                                </div>
                                <button id="add-resource-btn"
                                    class="px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg font-semibold hover:shadow-lg transition whitespace-nowrap">
                                    <i class="fas fa-plus mr-2"></i>Add Resource
                                </button>
                            </div>
                        </div>

                        <!-- Filters -->
                        <div
                            class="px-6 py-3 bg-gray-50 dark:bg-gray-750 border-b border-gray-100 dark:border-gray-700 flex gap-2 overflow-x-auto custom-scrollbar">
                            <button
                                class="resource-filter active px-3 py-1 text-sm font-medium rounded-full bg-indigo-100 text-indigo-700 dark:bg-indigo-900/50 dark:text-indigo-300 whitespace-nowrap transition"
                                data-filter="all">All</button>
                            <button
                                class="resource-filter px-3 py-1 text-sm font-medium rounded-full text-gray-600 hover:bg-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 whitespace-nowrap transition"
                                data-filter="video">Videos</button>
                            <button
                                class="resource-filter px-3 py-1 text-sm font-medium rounded-full text-gray-600 hover:bg-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 whitespace-nowrap transition"
                                data-filter="link">Articles</button>
                            <button
                                class="resource-filter px-3 py-1 text-sm font-medium rounded-full text-gray-600 hover:bg-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 whitespace-nowrap transition"
                                data-filter="pdf">PDFs</button>
                            <button
                                class="resource-filter px-3 py-1 text-sm font-medium rounded-full text-gray-600 hover:bg-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 whitespace-nowrap transition"
                                data-filter="document">Docs</button>
                        </div>

                        <!-- Content Grid -->
                        <div id="resources-grid"
                            class="flex-1 overflow-y-auto p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <!-- Resources will be injected here -->
                            <div class="col-span-full text-center py-20">
                                <i class="fas fa-folder-open text-6xl text-gray-200 dark:text-gray-700 mb-4"></i>
                                <p class="text-gray-500 dark:text-gray-400 text-lg">No resources found.</p>
                                <p class="text-gray-400 text-sm">Add a link to get started!</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Add Resource Modal -->
                <div id="resource-modal"
                    class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 glass">
                    <div
                        class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md m-4 transform transition-all scale-100">
                        <div
                            class="p-6 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center">
                            <h3 class="text-xl font-bold text-gray-800 dark:text-white font-heading">Add Resource</h3>
                            <button id="close-resource-modal"
                                class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <form id="resource-form" class="p-6 space-y-4">
                            <div>
                                <label
                                    class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Title</label>
                                <input type="text" id="resource-title" required
                                    class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none"
                                    placeholder="e.g. Calculus Notes">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">URL /
                                    Link</label>
                                <input type="url" id="resource-url" required
                                    class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none"
                                    placeholder="https://...">
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label
                                        class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Type</label>
                                    <select id="resource-type"
                                        class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none">
                                        <option value="link">Website/Link</option>
                                        <option value="video">Video</option>
                                        <option value="pdf">PDF</option>
                                        <option value="document">Document</option>
                                    </select>
                                </div>
                                <div>
                                    <label
                                        class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Subject
                                        (Optional)</label>
                                    <input type="text" id="resource-subject"
                                        class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none"
                                        placeholder="e.g. Math">
                                </div>
                            </div>

                            <div class="flex justify-end gap-3 mt-6">
                                <button type="button" id="cancel-resource-btn"
                                    class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition">Cancel</button>
                                <button type="submit"
                                    class="px-6 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg font-semibold hover:shadow-lg transition">Add
                                    Resource</button>
                            </div>
                        </form>
                    </div>
                </div>

                <div id="tool-chatbot" class="tool-section hidden h-full">
                    <div class="flex flex-col h-full bg-white dark:bg-gray-800 rounded-xl shadow-lg run-animation">
                        <!-- Chat Header -->
                        <div
                            class="px-6 py-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-white dark:bg-gray-800 rounded-t-xl z-10 relative shadow-sm">
                            <div class="flex items-center space-x-3">
                                <div
                                    class="w-10 h-10 rounded-full bg-gradient-to-tr from-indigo-500 to-purple-600 flex items-center justify-center text-white shadow-lg">
                                    <i class="fas fa-robot text-lg"></i>
                                </div>
                                <div>
                                    <h2 class="text-lg font-bold text-gray-800 dark:text-white flex items-center gap-2">
                                        Study Buddy AI
                                        <span
                                            class="px-2 py-0.5 rounded-full bg-indigo-100 text-indigo-700 dark:bg-indigo-900/50 dark:text-indigo-300 text-[10px] font-bold uppercase tracking-wider">AI</span>
                                    </h2>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Powered by DeepSeek</p>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button id="clear-chat-btn" title="Clear conversation"
                                    class="p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                                    <i class="fas fa-trash"></i>
                                </button>
                                <button id="chat-settings-btn"
                                    class="hidden p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                                    <i class="fas fa-cog"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Chat Messages Area -->
                        <div id="chat-messages"
                            class="flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar bg-gray-50 dark:bg-gray-900/50">
                            <!-- Welcome Message -->
                            <div class="flex gap-4 max-w-3xl mx-auto">
                                <div
                                    class="w-8 h-8 rounded-full bg-gradient-to-tr from-indigo-500 to-purple-600 flex items-center justify-center text-white flex-shrink-0 text-sm mt-1">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <div
                                    class="bg-white dark:bg-gray-800 p-4 rounded-2xl rounded-tl-none shadow-sm text-sm text-gray-800 dark:text-gray-200 border border-gray-200 dark:border-gray-700">
                                    <p class="font-bold mb-2"> Hello! I'm your AI Study Buddy powered by DeepSeek.</p>
                                    <p class="mb-2">I can help you with:</p>
                                    <ul class="list-disc list-inside space-y-1 text-xs ml-2">
                                        <li>Explaining difficult concepts</li>
                                        <li>Solving homework problems</li>
                                        <li>Generating practice quizzes</li>
                                        <li>Summarizing notes and articles</li>
                                        <li>Writing essays and assignments</li>
                                        <li>Creating study plans</li>
                                    </ul>
                                    <p class="mt-3 text-xs text-gray-600 dark:text-gray-400"> Try asking me anything
                                        or click a suggestion below!</p>
                                </div>
                            </div>
                        </div>

                        <!-- Chat Input Area -->
                        <div
                            class="p-4 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700 rounded-b-xl">
                            <div class="max-w-3xl mx-auto relative">
                                <!-- Suggested Prompts -->
                                <div id="suggested-prompts" class="mb-3 flex flex-wrap gap-2">
                                    <button type="button"
                                        class="suggested-prompt text-xs px-3 py-1.5 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40 transition border border-indigo-200 dark:border-indigo-800">
                                        Explain photosynthesis
                                    </button>
                                    <button type="button"
                                        class="suggested-prompt text-xs px-3 py-1.5 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40 transition border border-indigo-200 dark:border-indigo-800">
                                        Create a quiz on World War 2
                                    </button>
                                    <button type="button"
                                        class="suggested-prompt text-xs px-3 py-1.5 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40 transition border border-indigo-200 dark:border-indigo-800">
                                        Help me with algebra
                                    </button>
                                    <button type="button"
                                        class="suggested-prompt text-xs px-3 py-1.5 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300 rounded-full hover:bg-indigo-100 dark:hover:bg-indigo-900/40 transition border border-indigo-200 dark:border-indigo-800">
                                        Summarize the water cycle
                                    </button>
                                </div>

                                <form id="chat-form"
                                    class="relative flex items-end gap-2 bg-gray-100 dark:bg-gray-700 rounded-2xl p-2 focus-within:ring-2 focus-within:ring-indigo-500 transition shadow-inner">
                                    <textarea id="chat-input" rows="1" placeholder="Ask a question..."
                                        class="w-full bg-transparent border-none focus:ring-0 text-gray-800 dark:text-white resize-none max-h-32 py-3 px-3 custom-scrollbar"
                                        style="min-height: 44px;"></textarea>
                                    <button type="submit" id="send-btn" disabled
                                        class="p-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 active:translate-y-0 transition disabled:opacity-50 disabled:cursor-not-allowed">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </form>
                                <p class="text-[10px] text-center text-gray-400 mt-2">
                                    AI can make mistakes. Check important info.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chat Settings Modal -->
                <div id="chat-settings-modal"
                    class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 glass">
                    <div
                        class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md m-4 transform transition-all scale-100">
                        <div
                            class="p-6 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center">
                            <h3 class="text-xl font-bold text-gray-800 dark:text-white font-heading">AI Settings</h3>
                            <button id="close-chat-settings"
                                class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <div class="p-6 space-y-4">
                            <div>
                                <label
                                    class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">OpenRouter
                                    API Key</label>
                                <div class="relative">
                                    <input type="password" id="api-key-input"
                                        class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none"
                                        placeholder="sk-or-...">
                                    <i class="fas fa-key absolute left-3 top-3 text-gray-400 text-xs"></i>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">Key is stored locally in your browser.</p>
                            </div>

                            <div>
                                <label
                                    class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Model</label>
                                <select id="model-select"
                                    class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 outline-none">
                                    <option value="deepseek/deepseek-chat">DeepSeek V3 (Recommended)</option>
                                    <option value="meta-llama/llama-3-8b-instruct">Llama 3 8B</option>
                                    <option value="google/gemini-2.0-flash-exp">Gemini 2.0 Flash</option>
                                    <option value="openai/gpt-3.5-turbo">GPT-3.5 Turbo</option>
                                </select>
                            </div>

                            <div class="flex justify-end pt-4">
                                <button id="save-chat-settings"
                                    class="px-6 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg font-semibold hover:shadow-lg transition">
                                    Save Settings
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tool-analytics" class="tool-section hidden h-full">
                    <div
                        class="flex flex-col h-full bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-y-auto custom-scrollbar">
                        <!-- Header -->
                        <div
                            class="p-6 border-b border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-800 sticky top-0 z-10">
                            <h2 class="text-2xl font-bold font-heading text-gray-800 dark:text-white">Analytics
                                Dashboard</h2>
                            <p class="text-sm text-gray-500 dark:text-gray-400">Track your productivity and study habits
                            </p>
                        </div>

                        <div class="p-6 space-y-6">
                            <!-- Stats Cards -->
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                                <div
                                    class="bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-xl border border-indigo-100 dark:border-indigo-800">
                                    <div class="flex items-center gap-3 mb-2">
                                        <div
                                            class="w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-800 flex items-center justify-center text-indigo-600 dark:text-indigo-400">
                                            <i class="fas fa-check-circle"></i>
                                        </div>
                                        <h3 class="font-bold text-gray-700 dark:text-gray-300">Completion Rate</h3>
                                    </div>
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white"
                                        id="stat-completion-rate">0%</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">of total tasks</p>
                                </div>

                                <div
                                    class="bg-purple-50 dark:bg-purple-900/20 p-4 rounded-xl border border-purple-100 dark:border-purple-800">
                                    <div class="flex items-center gap-3 mb-2">
                                        <div
                                            class="w-8 h-8 rounded-full bg-purple-100 dark:bg-purple-800 flex items-center justify-center text-purple-600 dark:text-purple-400">
                                            <i class="fas fa-tasks"></i>
                                        </div>
                                        <h3 class="font-bold text-gray-700 dark:text-gray-300">Total Tasks</h3>
                                    </div>
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white" id="stat-total-tasks">0
                                    </p>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">items tracked</p>
                                </div>

                                <div
                                    class="bg-orange-50 dark:bg-orange-900/20 p-4 rounded-xl border border-orange-100 dark:border-orange-800">
                                    <div class="flex items-center gap-3 mb-2">
                                        <div
                                            class="w-8 h-8 rounded-full bg-orange-100 dark:bg-orange-800 flex items-center justify-center text-orange-600 dark:text-orange-400">
                                            <i class="fas fa-hourglass-half"></i>
                                        </div>
                                        <h3 class="font-bold text-gray-700 dark:text-gray-300">Pending</h3>
                                    </div>
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white" id="stat-pending-tasks">
                                        0</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">tasks remaining</p>
                                </div>

                                <div
                                    class="bg-green-50 dark:bg-green-900/20 p-4 rounded-xl border border-green-100 dark:border-green-800">
                                    <div class="flex items-center gap-3 mb-2">
                                        <div
                                            class="w-8 h-8 rounded-full bg-green-100 dark:bg-green-800 flex items-center justify-center text-green-600 dark:text-green-400">
                                            <i class="fas fa-calendar-check"></i>
                                        </div>
                                        <h3 class="font-bold text-gray-700 dark:text-gray-300">This Week</h3>
                                    </div>
                                    <p class="text-2xl font-bold text-gray-900 dark:text-white"
                                        id="stat-week-completed">0</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">completed just now</p>
                                </div>
                            </div>

                            <!-- Charts Grid -->
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <!-- Chart 1: Productivity Split -->
                                <div
                                    class="bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm min-h-[300px] flex flex-col">
                                    <h3 class="font-bold text-gray-800 dark:text-white mb-4">Productivity Split</h3>
                                    <div class="flex-1 relative flex items-center justify-center">
                                        <canvas id="chart-productivity"></canvas>
                                    </div>
                                </div>

                                <!-- Chart 2: Subject Distribution -->
                                <div
                                    class="bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm min-h-[300px] flex flex-col">
                                    <h3 class="font-bold text-gray-800 dark:text-white mb-4">Workload by Subject</h3>
                                    <div class="flex-1 relative">
                                        <canvas id="chart-subjects"></canvas>
                                    </div>
                                </div>

                                <!-- Chart 3: Weekly Activity -->
                                <div
                                    class="col-span-1 lg:col-span-2 bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm min-h-[300px] flex flex-col">
                                    <h3 class="font-bold text-gray-800 dark:text-white mb-4">Weekly Activity Trend</h3>
                                    <div class="flex-1 relative">
                                        <canvas id="chart-weekly"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tool-gamification" class="tool-section hidden h-full">
                    <div
                        class="flex flex-col h-full bg-white dark:bg-gray-800 rounded-xl shadow-lg run-animation overflow-y-auto custom-scrollbar">
                        <!-- Header / Profile Card -->
                        <div
                            class="p-6 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-t-xl relative overflow-hidden">
                            <div class="absolute inset-0 bg-white opacity-10 pattern-dots"></div>

                            <div class="relative z-10 flex flex-col md:flex-row items-center gap-6">
                                <div class="relative">
                                    <div class="w-24 h-24 rounded-full bg-white p-1 shadow-xl">
                                        <img src="https://ui-avatars.com/api/?name=User&background=random"
                                            id="profile-avatar" class="w-full h-full rounded-full object-cover">
                                    </div>
                                    <div class="absolute -bottom-2 inset-x-0 flex justify-center">
                                        <span
                                            class="bg-yellow-400 text-yellow-900 text-xs font-bold px-3 py-1 rounded-full shadow-md border-2 border-white"
                                            id="profile-level-badge">Lvl 1</span>
                                    </div>
                                </div>

                                <div class="flex-1 text-center md:text-left w-full">
                                    <h2 class="text-3xl font-bold font-heading mb-1">Student Learner</h2>
                                    <p class="text-indigo-200 text-sm mb-4" id="profile-title">Novice Explorer</p>

                                    <div class="relative pt-1">
                                        <div class="flex mb-2 items-center justify-between">
                                            <div>
                                                <span
                                                    class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-indigo-600 bg-indigo-200">
                                                    XP Progress
                                                </span>
                                            </div>
                                            <div class="text-right">
                                                <span class="text-xs font-semibold inline-block text-white"
                                                    id="xp-text">
                                                    0 / 100 XP
                                                </span>
                                            </div>
                                        </div>
                                        <div
                                            class="overflow-hidden h-3 mb-4 text-xs flex rounded-full bg-indigo-800/50">
                                            <div id="xp-progress-bar" style="width: 0%"
                                                class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-yellow-400 transition-all duration-500 ease-out">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex gap-4 text-center">
                                    <div class="bg-white/10 rounded-lg p-3 backdrop-blur-sm min-w-[80px]">
                                        <div class="text-2xl font-bold" id="stat-total-xp">0</div>
                                        <div class="text-xs text-indigo-100">Total XP</div>
                                    </div>
                                    <div class="bg-white/10 rounded-lg p-3 backdrop-blur-sm min-w-[80px]">
                                        <div class="text-2xl font-bold" id="stat-streak">0</div>
                                        <div class="text-xs text-indigo-100">Day Streak</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Content -->
                        <div class="p-6 space-y-8">
                            <!-- Badges Section -->
                            <section>
                                <h3
                                    class="text-xl font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2">
                                    <i class="fas fa-medal text-yellow-500"></i> Achievements
                                </h3>
                                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="badges-grid">
                                    <!-- Badges injected by JS -->
                                </div>
                            </section>

                            <!-- Recent Activity -->
                            <section>
                                <h3
                                    class="text-xl font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2">
                                    <i class="fas fa-history text-indigo-500"></i> Recent History
                                </h3>
                                <div class="space-y-3" id="xp-history-list">
                                    <div class="text-center text-gray-400 text-sm py-4">No activity yet. Go complete a
                                        task!</div>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>

                <!-- Level Up Modal -->
                <div id="levelup-modal"
                    class="fixed inset-0 bg-black/80 hidden items-center justify-center z-[100] backdrop-blur-sm">
                    <div
                        class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 max-w-sm w-full text-center relative transform scale-100 animate-bounce-short">
                        <canvas id="confetti-canvas" class="absolute inset-0 pointer-events-none"></canvas>
                        <div
                            class="w-24 h-24 bg-yellow-400 rounded-full flex items-center justify-center text-5xl mx-auto mb-4 shadow-lg ring-4 ring-yellow-200 dark:ring-yellow-600 animate-pulse">
                            
                        </div>
                        <h2 class="text-3xl font-bold text-gray-800 dark:text-white mb-2 font-heading">Level Up!</h2>
                        <p class="text-gray-600 dark:text-gray-300 text-lg mb-6">You reached <span
                                class="text-indigo-600 dark:text-indigo-400 font-bold" id="modal-new-level">Level
                                2</span></p>

                        <div class="bg-gray-50 dark:bg-gray-700 rounded-xl p-4 mb-6">
                            <p class="text-sm text-gray-500 dark:text-gray-400 uppercase tracking-wide font-semibold">
                                New Title Unlocked</p>
                            <p class="text-xl font-bold text-indigo-500 dark:text-indigo-300" id="modal-new-title">
                                Apprentice</p>
                        </div>

                        <button id="close-levelup-btn"
                            class="w-full py-3 bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition">
                            Awesome!
                        </button>
                    </div>
                </div>

                <div id="tool-backup" class="tool-section hidden">
                    <div class="max-w-4xl mx-auto space-y-8">
                        <div class="bg-white dark:bg-gray-800 rounded-xl p-8 shadow-lg">
                            <div class="flex items-center gap-4 mb-6">
                                <div
                                    class="w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center text-blue-600 dark:text-blue-400">
                                    <i class="fas fa-file-export text-2xl"></i>
                                </div>
                                <div>
                                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Export Data</h2>
                                    <p class="text-gray-600 dark:text-gray-400">Download a copy of your data for
                                        safekeeping.</p>
                                </div>
                            </div>
                            <div
                                class="bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg p-4 mb-6">
                                <p class="text-sm text-blue-800 dark:text-blue-200">
                                    <i class="fas fa-info-circle mr-2"></i>
                                    Include: Tasks, Events, Timetable, Notes, Resources, and Gamification Stats.
                                </p>
                            </div>
                            <button id="export-btn"
                                class="w-full sm:w-auto px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg transition shadow-md hover:shadow-lg flex items-center justify-center gap-2">
                                <i class="fas fa-download"></i> Download Backup
                            </button>
                        </div>

                        <div class="bg-white dark:bg-gray-800 rounded-xl p-8 shadow-lg">
                            <div class="flex items-center gap-4 mb-6">
                                <div
                                    class="w-12 h-12 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center text-purple-600 dark:text-purple-400">
                                    <i class="fas fa-file-import text-2xl"></i>
                                </div>
                                <div>
                                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Restore Data</h2>
                                    <p class="text-gray-600 dark:text-gray-400">Restore your data from a backup file.
                                    </p>
                                </div>
                            </div>

                            <div class="border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl p-8 text-center hover:border-purple-500 dark:hover:border-purple-500 transition cursor-pointer"
                                id="drop-zone">
                                <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                                <p class="text-lg font-medium text-gray-700 dark:text-gray-300 mb-2">Click or Drag JSON
                                    file here</p>
                                <p class="text-sm text-gray-500 dark:text-gray-400 mb-4">Only .json files are supported
                                </p>
                                <input type="file" id="import-file" accept=".json" class="hidden">
                                <button id="select-file-btn"
                                    class="px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-50 dark:hover:bg-gray-600 transition">
                                    Select File
                                </button>
                            </div>
                        </div>

                        <div
                            class="bg-white dark:bg-gray-800 rounded-xl p-8 shadow-lg border border-red-100 dark:border-red-900/30">
                            <div class="flex items-center gap-4 mb-6">
                                <div
                                    class="w-12 h-12 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center text-red-600 dark:text-red-400">
                                    <i class="fas fa-exclamation-triangle text-2xl"></i>
                                </div>
                                <div>
                                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Danger Zone</h2>
                                    <p class="text-gray-600 dark:text-gray-400">Irreversible actions.</p>
                                </div>
                            </div>

                            <div
                                class="flex flex-col sm:flex-row items-center justify-between p-4 bg-red-50 dark:bg-red-900/10 rounded-lg border border-red-100 dark:border-red-900/30">
                                <div class="mb-4 sm:mb-0">
                                    <h4 class="font-bold text-red-700 dark:text-red-400">Factory Reset</h4>
                                    <p class="text-sm text-red-600 dark:text-red-300">Clear all local data and start
                                        fresh.</p>
                                </div>
                                <button id="reset-data-btn"
                                    class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-lg transition shadow-sm hover:shadow-md">
                                    Reset All Data
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tool-profile" class="tool-section hidden">
                    <div class="max-w-5xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8">

                        <!-- Sidebar: Identity -->
                        <div class="lg:col-span-1 space-y-6">
                            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg text-center">
                                <div class="relative w-32 h-32 mx-auto mb-4 group cursor-pointer" id="avatar-container">
                                    <div id="profile-avatar-display"
                                        class="w-full h-full rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-4xl shadow-md overflow-hidden ring-4 ring-white dark:ring-gray-700">
                                        <i class="fas fa-user text-white"></i>
                                    </div>
                                    <div
                                        class="absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition duration-300">
                                        <i class="fas fa-camera text-white text-xl"></i>
                                    </div>
                                </div>
                                <h2 id="profile-name-display"
                                    class="text-2xl font-bold text-gray-800 dark:text-white mb-1">Student</h2>
                                <p id="profile-email-display" class="text-sm text-gray-500 dark:text-gray-400 mb-4">
                                    student@example.com</p>

                                <div class="bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-3 mb-4">
                                    <p id="profile-bio-display"
                                        class="text-indigo-800 dark:text-indigo-200 italic text-sm">"Ready to learn!"
                                    </p>
                                </div>

                                <div class="grid grid-cols-2 gap-2 text-sm">
                                    <div class="bg-gray-50 dark:bg-gray-700/50 p-2 rounded-lg">
                                        <div class="text-gray-500 dark:text-gray-400 text-xs">Level</div>
                                        <div class="font-bold text-indigo-600 dark:text-indigo-400"
                                            id="profile-level-stat">1</div>
                                    </div>
                                    <div class="bg-gray-50 dark:bg-gray-700/50 p-2 rounded-lg">
                                        <div class="text-gray-500 dark:text-gray-400 text-xs">Joined</div>
                                        <div class="font-bold text-gray-800 dark:text-white" id="profile-joined-date">-
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Main: Customization -->
                        <div class="lg:col-span-2 space-y-6">
                            <!-- Personal Details -->
                            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                                <h3
                                    class="text-lg font-bold text-gray-800 dark:text-white mb-4 border-b border-gray-100 dark:border-gray-700 pb-2">
                                    <i class="fas fa-id-card text-indigo-500 mr-2"></i>Personal Details
                                </h3>
                                <form id="profile-form" class="space-y-4">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label
                                                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Display
                                                Name</label>
                                            <input type="text" id="profile-name-input"
                                                class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-indigo-500 transition">
                                        </div>
                                        <div>
                                            <label
                                                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Motto
                                                / Bio</label>
                                            <input type="text" id="profile-bio-input"
                                                class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-indigo-500 transition">
                                        </div>
                                    </div>

                                    <div>
                                        <label
                                            class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Choose
                                            Avatar</label>
                                        <div class="grid grid-cols-5 gap-3" id="avatar-selector">
                                            <!-- Generated by JS -->
                                        </div>
                                    </div>

                                    <button type="submit"
                                        class="px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg transition shadow-md">
                                        Save Changes
                                    </button>
                                </form>
                            </div>

                            <!-- Study Goals -->
                            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                                <h3
                                    class="text-lg font-bold text-gray-800 dark:text-white mb-4 border-b border-gray-100 dark:border-gray-700 pb-2">
                                    <i class="fas fa-bullseye text-red-500 mr-2"></i>Study Goals
                                </h3>
                                <div class="space-y-4">
                                    <div>
                                        <label
                                            class="flex justify-between text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                            <span>Daily Study Target</span>
                                            <span id="study-goal-display"
                                                class="text-indigo-600 dark:text-indigo-400 font-bold">4 hours</span>
                                        </label>
                                        <input type="range" id="study-goal-input" min="1" max="12" value="4"
                                            class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 accent-indigo-600">
                                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                                            <span>1h</span>
                                            <span>12h</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Appearance -->
                            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                                <h3
                                    class="text-lg font-bold text-gray-800 dark:text-white mb-4 border-b border-gray-100 dark:border-gray-700 pb-2">
                                    <i class="fas fa-palette text-pink-500 mr-2"></i>Appearance
                                </h3>
                                <div class="flex items-center gap-4">
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Accent
                                        Color:</span>
                                    <div class="flex gap-3">
                                        <button
                                            class="w-8 h-8 rounded-full bg-blue-500 ring-2 ring-offset-2 ring-transparent hover:ring-blue-300 transition theme-color-btn"
                                            data-color="blue"></button>
                                        <button
                                            class="w-8 h-8 rounded-full bg-purple-500 ring-2 ring-offset-2 ring-transparent hover:ring-purple-300 transition theme-color-btn"
                                            data-color="purple"></button>
                                        <button
                                            class="w-8 h-8 rounded-full bg-green-500 ring-2 ring-offset-2 ring-transparent hover:ring-green-300 transition theme-color-btn"
                                            data-color="green"></button>
                                        <button
                                            class="w-8 h-8 rounded-full bg-orange-500 ring-2 ring-offset-2 ring-transparent hover:ring-orange-300 transition theme-color-btn"
                                            data-color="orange"></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="loading-spinner"
                    class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-6 flex flex-col items-center">
                        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4">
                        </div>
                        <p class="text-gray-800 dark:text-white font-semibold">Loading...</p>
                    </div>
                </div>

                <!-- JavaScript -->
                <script src="script.js"></script>
</body>

</html>